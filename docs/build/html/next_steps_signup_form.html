
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Legal Server Signup &#8212; ILAO Sprint 124 documentation</title>
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../html/_static/css/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../build/html/_static/css/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Next Steps SMS Subscriptions" href="next_steps_sms_delivery.html" />
    <link rel="prev" title="Next Steps User Entity" href="next_steps_entity_type.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="next_steps_sms_delivery.html" title="Next Steps SMS Subscriptions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="next_steps_entity_type.html" title="Next Steps User Entity"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ILAO Sprint 124 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="next_steps.html" accesskey="U">Next Steps Flows</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Legal Server Signup</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="legal-server-signup">
<h1>Legal Server Signup<a class="headerlink" href="#legal-server-signup" title="Permalink to this headline">¶</a></h1>
<p>The Legal Server implementation anticipates having 2 pieces:</p>
<ul class="simple">
<li><p>An iFrame from our website to subscribe the user</p></li>
<li><p>An API post to update the subscribed users data</p></li>
</ul>
<div class="section" id="iframe-form">
<h2>IFrame Form<a class="headerlink" href="#iframe-form" title="Permalink to this headline">¶</a></h2>
<img alt="_images/next_steps_signup.png" src="_images/next_steps_signup.png" />
<p>ILAO will provide an iFrame url to partners for inclusion in their instance of LegalServer. The iframe code is listed on the edit organization form for the organization in the website.</p>
<p>The form includes:</p>
<ul class="simple">
<li><p>List of LSC problem codes, to make it easier for caseworkers to filter</p></li>
<li><p>List of published NextStep Flows</p></li>
<li><p>List of available steps</p></li>
<li><p>A field to collect the client’s mobile-number</p></li>
<li><p>A field to collect tthe client’s zip code</p></li>
<li><p>Language preference of the client</p></li>
<li><p>Opt in field</p></li>
<li><p>Hidden organization ID as a query parameter</p></li>
</ul>
<p>When submitted this will create a nextStepsUserEntity within ILAO’s website and store:</p>
<ul class="simple">
<li><p>The client’s mobile number</p></li>
<li><p>The client’s zip code</p></li>
<li><p>The client’s language preference</p></li>
<li><p>The referring organization</p></li>
<li><p>The node ID of the Next Step Flow the user is subscribed to</p></li>
<li><p>The initial step the client was subscribed to.</p></li>
</ul>
<p>The website will then send the initial message on the next scheduled task run.</p>
</div>
<div class="section" id="api-post">
<h2>API Post<a class="headerlink" href="#api-post" title="Permalink to this headline">¶</a></h2>
<p>ILAO will work with partners to implement an API block that will post back to ILAO. This API call will include these parameters from Legal Server:</p>
<ul class="simple">
<li><p>The user’s mobile phone number</p></li>
<li><p>The uuid from legal server</p></li>
<li><p>The user’s zip code</p></li>
</ul>
<p>Once posted, the website will:</p>
<ul class="simple">
<li><p>Find the relevant NextStepUser entity</p></li>
<li><p>Update the NextStepsUser entity with the uuid based on the phone number where the uuid is empty</p></li>
<li><p>Query the otis_triage_user table to check for the uuid; if found will add the triage user id to the NextStepsUser entity</p></li>
</ul>
<p>The purpose of this step is to track OTIS vs non-OTIS cases and make this information available in our OTIS dashboard.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Legal Server Signup</a><ul>
<li><a class="reference internal" href="#iframe-form">IFrame Form</a></li>
<li><a class="reference internal" href="#api-post">API Post</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="next_steps_entity_type.html"
                        title="previous chapter">Next Steps User Entity</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="next_steps_sms_delivery.html"
                        title="next chapter">Next Steps SMS Subscriptions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/next_steps_signup_form.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="next_steps_sms_delivery.html" title="Next Steps SMS Subscriptions"
             >next</a> |</li>
        <li class="right" >
          <a href="next_steps_entity_type.html" title="Next Steps User Entity"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ILAO Sprint 124 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="next_steps.html" >Next Steps Flows</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Legal Server Signup</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Gwen Daniels.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.1.
    </div>
  </body>
</html>