
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global SMS functions &#8212; ILAO Sprint 124 documentation</title>
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../html/_static/css/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../build/html/_static/css/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Eviction functions" href="otis_eviction_functions.html" />
    <link rel="prev" title="Twilio Functions" href="otis_sms_functions.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="otis_eviction_functions.html" title="Eviction functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="otis_sms_functions.html" title="Twilio Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ILAO Sprint 124 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="otis_cms.html" >Get Legal Help</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="otis_sms_intake.html" >Online Intake Over SMS</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="otis_sms_functions.html" accesskey="U">Twilio Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Global SMS functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="global-sms-functions">
<h1>Global SMS functions<a class="headerlink" href="#global-sms-functions" title="Permalink to this headline">¶</a></h1>
<p>These functions are used across applications.</p>
<div class="section" id="otis-validate-total-income">
<h2>OTIS Validate Total Income<a class="headerlink" href="#otis-validate-total-income" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-get-callback-times <strong>This appears to be the wrong function</strong></p>
<p><strong>Parameters:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>adults</p></td>
<td><p>Required. Integer.</p></td>
</tr>
<tr class="row-odd"><td><p>children</p></td>
<td><p>Required. Integer.</p></td>
</tr>
<tr class="row-even"><td><p>Income types</p></td>
<td><p>Key should be named income_[income type]. Value
should be integer</p></td>
</tr>
<tr class="row-odd"><td><p>standard</p></td>
<td><p>Basic, ami, or fpl. Defaults to fpl if not
provided.</p></td>
</tr>
<tr class="row-even"><td><p>max</p></td>
<td><p>Percentage max income to calculate. Number.
Defaults to 300 if not provided</p></td>
</tr>
</tbody>
</table>
<p><strong>Requires:</strong>  Income Limits asset</p>
<p><strong>Returns</strong> An object with values for</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>income</p></td>
<td><p>Integer; total income</p></td>
</tr>
<tr class="row-odd"><td><p>incomeFlag</p></td>
<td><p>0 if not over-income; 1 if over-income.</p></td>
</tr>
<tr class="row-even"><td><p>maxIncome</p></td>
<td><p>Calculated maximum income</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unemployment benefits are computed at the passed value times 4.3 to convert weekly to monthly for calculating income.</p>
</div>
<p><strong>Status:</strong>  Complete</p>
</div>
<div class="section" id="otis-validate-payments">
<h2>OTIS Validate Payments<a class="headerlink" href="#otis-validate-payments" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-payments</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns an array of numbers that represent which types of payments we need to collect income information for.</p>
<p><strong>Parameters:</strong>  event.payments (the user’s input to the do you have any of these payments question)</p>
<p><strong>Requires:</strong>  Nothing</p>
<p><strong>Returns:</strong> An array of payment types to ask for income information from the user.</p>
<p><strong>Status:</strong>  Complete.</p>
</div>
<div class="section" id="otis-validate-benefit-types">
<h2>OTIS Validate Benefit Types<a class="headerlink" href="#otis-validate-benefit-types" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-payments</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns an array of numbers that represent which types of benefits we need to collect income information for.</p>
<p><strong>Parameters:</strong>  event.payments (the user’s input to the do you have any of these benefits question)</p>
<p><strong>Requires:</strong>  Nothing</p>
<p><strong>Returns:</strong> An array of benefit types to ask for income information from the user. These are numerical values of 1-5 that are used to route the user through income questions.</p>
</div>
<div class="section" id="id1">
<h2>OTIS Validate Benefit Types<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-payments</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns an array of numbers that represent which types of benefits we need to collect income information for.</p>
<p><strong>Parameters:</strong>  event.payments (the user’s input to the do you have any of these benefits question)</p>
<p><strong>Requires:</strong>  Nothing</p>
<p><strong>Returns:</strong> An array of benefit types to ask for income information from the user.</p>
<p><strong>Status:</strong>  Complete.</p>
</div>
<div class="section" id="otis-validate-money-input">
<h2>OTIS Validate Money Input<a class="headerlink" href="#otis-validate-money-input" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-money-input</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns the string if it is a number or 0 if it is not. This can then be used to route users to retry their input or move on to the next step.</p>
<p><strong>Parameters:</strong>  event.amount (the user’s input in response to a money question)</p>
<p><strong>Requires:</strong>  Nothing</p>
<p><strong>Returns:</strong> A number. -1 is returned if it is not a valid amount.</p>
<p><strong>Status:</strong>  Should be updated to accommodate for dollar formatting ($,. within the data).</p>
</div>
<div class="section" id="load-marital-statuses">
<h2>Load marital statuses<a class="headerlink" href="#load-marital-statuses" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-load-marital-statuses</p>
<p><strong>Purpose</strong>: Returns list of marital statuses for user to select from.</p>
<p><strong>Parameters:</strong> event.langcode (may be null)</p>
<p><strong>Requires:</strong>  None</p>
<p><strong>Returns:</strong> A string of marital statuses for display based on the language code provided.</p>
</div>
<div class="section" id="load-languages">
<h2>Load languages<a class="headerlink" href="#load-languages" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-load-languages</p>
<p><strong>Purpose</strong>: Returns list of languages for user to select from.</p>
<p><strong>Parameters:</strong> event.langcode (may be null)</p>
<p><strong>Requires:</strong>  None</p>
<p><strong>Returns:</strong> A string of languages for display based on the language code provided.</p>
</div>
<div class="section" id="load-genders">
<h2>Load genders<a class="headerlink" href="#load-genders" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-load-genders</p>
<p><strong>Purpose</strong>: Returns list of genders for user to select from.</p>
<p><strong>Parameters:</strong> event.langcode (may be null)</p>
<p><strong>Requires:</strong>  None</p>
<p><strong>Returns:</strong> A string of genders for display based on the language code provided.</p>
</div>
<div class="section" id="load-ethnicities">
<h2>Load ethnicities<a class="headerlink" href="#load-ethnicities" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-load-ethnicity</p>
<p><strong>Purpose</strong>: Returns list of ethnicity options for user to select from.</p>
<p><strong>Parameters:</strong> event.langcode (may be null)</p>
<p><strong>Requires:</strong>  None</p>
<p><strong>Returns:</strong> A string of ethnicities for display based on the language code provided.</p>
</div>
<div class="section" id="load-races">
<h2>Load races<a class="headerlink" href="#load-races" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-load-races</p>
<p><strong>Purpose</strong>: Returns list of races for user to select from.</p>
<p><strong>Parameters:</strong> event.langcode (may be null)</p>
<p><strong>Requires:</strong>  None</p>
<p><strong>Returns:</strong> A string of races for display based on the language code provided.</p>
</div>
<div class="section" id="otis-validate-race">
<h2>OTIS Validate Race<a class="headerlink" href="#otis-validate-race" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-race</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid selection or not. This can then be used to route users to retry their input or move on to the next step.</p>
<p><strong>Parameters:</strong>  event.race (the user’s input)</p>
<p><strong>Requires:</strong>  Nothing; values are stored in the function as an array</p>
<p><strong>Returns:</strong> A string, either the name of the race the user selected OR 0 if it is invalid.</p>
</div>
<div class="section" id="otis-validate-ethnicity">
<h2>OTIS Validate Ethnicity<a class="headerlink" href="#otis-validate-ethnicity" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-ethnicity</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid selection or not. This can then be used to route users to retry their input or move on to the next step.</p>
<p><strong>Parameters:</strong>  event.ethnicity (the user’s input)</p>
<p><strong>Requires:</strong>  Nothing; values are stored in the function as an array</p>
<p><strong>Returns:</strong> A string, either the name of the race the user selected OR -1 if it is invalid.</p>
</div>
<div class="section" id="otis-validate-gender">
<h2>OTIS Validate Gender<a class="headerlink" href="#otis-validate-gender" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-gender</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid selection or not. This can then be used to route users to retry their input or move on to the next step.  The returned strings align with Legal Server’s supported genders.</p>
<p><strong>Parameters:</strong>  event.gender (the user’s input)</p>
<p><strong>Requires:</strong>  Nothing; values are stored in the function as an array</p>
<p><strong>Returns:</strong> A string, either the name of the gender the user selected OR -1 if it is invalid.</p>
</div>
<div class="section" id="otis-validate-marital-status">
<h2>OTIS Validate Marital Status<a class="headerlink" href="#otis-validate-marital-status" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-marital-status</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid selection or not. This can then be used to route users to retry their input or move on to the next step.  The returned strings align with Legal Server’s supported marital statuses.</p>
<p><strong>Parameters:</strong>  event.maritalStatus (the user’s input)</p>
<p><strong>Requires:</strong>  Nothing; values are stored in the function as an array</p>
<p><strong>Returns:</strong> A string, either the name of the marital status the user selected OR -1 if it is invalid.</p>
</div>
<div class="section" id="otis-validate-preferred-language">
<h2>OTIS Validate Preferred Language<a class="headerlink" href="#otis-validate-preferred-language" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-preferred-language</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid selection or not. This can then be used to route users to retry their input or move on to the next step.  The returned strings align with Legal Server’s supported languages.</p>
<p><strong>Parameters:</strong>  event.language (the user’s input)</p>
<p><strong>Requires:</strong>  Nothing; values are stored in the function as an array</p>
<p><strong>Returns:</strong> A string, either the name of the language the user selected OR -1 if it is invalid.</p>
</div>
<div class="section" id="otis-validate-year">
<h2>OTIS Validate Year<a class="headerlink" href="#otis-validate-year" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-year</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid year. This can then be used to route users to retry their input or move on to the next step.</p>
<p>If the user enters a 2 digit year, it is assumed to be 19xx if the string is greater than 10.</p>
<p><strong>Parameters:</strong>  event.year (the user’s input)</p>
<p><strong>Requires:</strong> none</p>
<p><strong>Returns:</strong> A number (either the 4 digit year or a 0 representing invalid data)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Would be nice to not allow future years to be included.</p>
</div>
</div>
<div class="section" id="otis-validate-day-of-month">
<h2>OTIS Validate Day of Month<a class="headerlink" href="#otis-validate-day-of-month" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-day-of-month</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid number between 1 and 31 for  months with 31 days 1 and 30 for days with 30 days, and between 1 - 29 days for February. This can then be used to route users to retry their input or move on to the next step.</p>
<p><strong>Parameters:</strong>  event.day (the user’s input), event.month (the user’s previous input for the month)</p>
<p><strong>Requires:</strong>  none</p>
<p><strong>Returns:</strong> A number (either the day or a 0 representing invalid data)</p>
</div>
<div class="section" id="otis-validate-month">
<h2>OTIS Validate Month<a class="headerlink" href="#otis-validate-month" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-month</p>
<p><strong>Purpose</strong>: Takes a string of input from the user and returns whether it is a valid month. This validates both numbers (1 - 12) and text input such as November, november, nov, or Nov. This can then be used to route users to retry their input or move on to the next step.</p>
<p><strong>Parameters:</strong>  event.month (the user’s input)</p>
<p><strong>Requires:</strong>  none</p>
<p><strong>Returns:</strong> A number (either the day or a 0 representing invalid data)</p>
</div>
<div class="section" id="otis-calculate-age">
<h2>OTIS Calculate Age<a class="headerlink" href="#otis-calculate-age" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-calculate-age</p>
<p><strong>Purpose</strong>: Calculates an age based on a date of birth.</p>
<p><strong>Parameters:</strong>  event.day, event.month, and event.year (provided by the user)</p>
<p><strong>Requires:</strong>  none</p>
<p><strong>Returns:</strong> A number</p>
</div>
<div class="section" id="otis-poverty-estimate">
<h2>OTIS Poverty Estimate<a class="headerlink" href="#otis-poverty-estimate" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-poverty-estimate</p>
<p><strong>Purpose</strong>: Gets the estimated over-income threshold for users based on household size.</p>
<p><strong>Parameters:</strong>  event.children and event.adult. Both should be numbers.</p>
<p><strong>Requires:</strong>  API call to get poverty income.</p>
<p><strong>Returns:</strong> An object containing:</p>
<ul class="simple">
<li><p>income, which represents the total income</p></li>
<li><p>household_size, which represents the number of adults and children in the household</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the function to determine whether a user passes the initial basic income screening similar to what appears on IllinoisLegalAid.org/get-legal-help.</p>
</div>
</div>
<div class="section" id="id2">
<h2>OTIS validate total income<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><strong>Function name:</strong>  otis-validate-total-income</p>
<p><strong>Purpose</strong>: Gets the estimated over-income threshold for users based on household size.</p>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>event.children and event.adult. Both should be numbers.</p></li>
<li><p>event.standard which is the income standard to use.  This defaults to the federal poverty level.</p></li>
<li><p>event.max which is the maximum income percentage to use.  This defaults to 300.</p></li>
<li><p>Wage frequency, which is the wage frequency</p></li>
</ul>
<p><strong>Requires:</strong>  API call to get poverty income.</p>
<p><strong>Returns:</strong> An object containing:</p>
<ul class="simple">
<li><p>income, which is the total monthly income</p></li>
<li><p>incomeFlag, which is 0 or 1.  1 represents overincome</p></li>
<li><p>maxIncome, which is the calculated maximum income based on the selected standard and allowable percentage.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the function to determine whether a user passes the income screening for a specific organization.</p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Global SMS functions</a><ul>
<li><a class="reference internal" href="#otis-validate-total-income">OTIS Validate Total Income</a></li>
<li><a class="reference internal" href="#otis-validate-payments">OTIS Validate Payments</a></li>
<li><a class="reference internal" href="#otis-validate-benefit-types">OTIS Validate Benefit Types</a></li>
<li><a class="reference internal" href="#id1">OTIS Validate Benefit Types</a></li>
<li><a class="reference internal" href="#otis-validate-money-input">OTIS Validate Money Input</a></li>
<li><a class="reference internal" href="#load-marital-statuses">Load marital statuses</a></li>
<li><a class="reference internal" href="#load-languages">Load languages</a></li>
<li><a class="reference internal" href="#load-genders">Load genders</a></li>
<li><a class="reference internal" href="#load-ethnicities">Load ethnicities</a></li>
<li><a class="reference internal" href="#load-races">Load races</a></li>
<li><a class="reference internal" href="#otis-validate-race">OTIS Validate Race</a></li>
<li><a class="reference internal" href="#otis-validate-ethnicity">OTIS Validate Ethnicity</a></li>
<li><a class="reference internal" href="#otis-validate-gender">OTIS Validate Gender</a></li>
<li><a class="reference internal" href="#otis-validate-marital-status">OTIS Validate Marital Status</a></li>
<li><a class="reference internal" href="#otis-validate-preferred-language">OTIS Validate Preferred Language</a></li>
<li><a class="reference internal" href="#otis-validate-year">OTIS Validate Year</a></li>
<li><a class="reference internal" href="#otis-validate-day-of-month">OTIS Validate Day of Month</a></li>
<li><a class="reference internal" href="#otis-validate-month">OTIS Validate Month</a></li>
<li><a class="reference internal" href="#otis-calculate-age">OTIS Calculate Age</a></li>
<li><a class="reference internal" href="#otis-poverty-estimate">OTIS Poverty Estimate</a></li>
<li><a class="reference internal" href="#id2">OTIS validate total income</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="otis_sms_functions.html"
                        title="previous chapter">Twilio Functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="otis_eviction_functions.html"
                        title="next chapter">Eviction functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/otis_global_functions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="otis_eviction_functions.html" title="Eviction functions"
             >next</a> |</li>
        <li class="right" >
          <a href="otis_sms_functions.html" title="Twilio Functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ILAO Sprint 124 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="otis_cms.html" >Get Legal Help</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="otis_sms_intake.html" >Online Intake Over SMS</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="otis_sms_functions.html" >Twilio Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Global SMS functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Gwen Daniels.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.1.
    </div>
  </body>
</html>