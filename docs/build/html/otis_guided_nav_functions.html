<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guided Navigation SMS functions &mdash; ILAO Sprint 124a documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/themeoverrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=d5fad431"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Houston AI Classifier API Docs" href="otis_tech_houston_ai.html" />
    <link rel="prev" title="Guided Navigation Forms" href="otis_tech_guided_navigation_forms.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ILAO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="design_guide.html">Design &amp; Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_management.html">Custom blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="people_management.html">User Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="legal_information.html">Browsing to legal information</a></li>
<li class="toctree-l1"><a class="reference internal" href="legal_content_cms.html">Legal Content CMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="cms_structured_legal_content.html">Next generation content/COPE</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_pages_cms.html">Basic pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="testimonials_cms.html">Testimonials Content Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="webforms_cms.html">Webforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation_cms.html">Translation Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="calendar_cms.html">Calendar</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs_cms.html">Job Listings</a></li>
<li class="toctree-l1"><a class="reference internal" href="discussion_groups.html">Discussion groups</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="otis_cms.html">Get Legal Help</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="otis_endusers.html">Get Legal Help Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="otis_organization_management.html">Organization management</a></li>
<li class="toctree-l2"><a class="reference internal" href="otis_endpoints.html">Triage rule endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="otis_reports.html">Get Legal Help Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="otis_ai_integration.html">OTIS AI Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="otis_third_party_support.html">Supported Integrations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="otis_sms_intake.html">Online Intake Over SMS</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="otis_sms_as_a_user.html">Getting legal help over SMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="otis_sms_intake_architecture.html">General architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="otis_sms_flows.html">Flows and Subflows</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="otis_sms_functions.html">Twilio Functions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#function-standards">Function standards</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="otis_sms_functions.html#oauth-get-token">OAuth get token</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#otis-get-confirmation">OTIS get confirmation</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#callbacks">Callbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#otis-zipcode-validate">OTIS Zipcode Validate</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#get-housing-counselors-list">Get housing counselors list</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#update-triage-user-database">Update triage user database</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#create-triage-user">Create triage user</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#increase-intake-counter">Increase intake counter</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#geting-guided-navigation-matches">Geting Guided Navigation Matches</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#matches-geography">Matches (geography)</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#matches-names">Matches (names)</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#get-intake-settings-data">Get intake settings data</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#validate-date-functions">Validate date functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#calculate-age">Calculate age</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#conflict-check">Conflict check</a></li>
<li class="toctree-l4"><a class="reference internal" href="otis_sms_functions.html#send-to-legal-server">Send to Legal Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="otis_maintenance.html">Maintaining and expanding OTIS SMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="otis_sms_translations.html">OTIS SMS Translations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="otis_facebook.html">Facebook Integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="otis_features.html">Additional Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="site_search.html">Site Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="site_faqs.html">Site FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_cms_features.html">Other Website Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="taxonomies.html">Taxonomies</a></li>
<li class="toctree-l1"><a class="reference internal" href="rss_feeds.html">RSS Feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="ilao_api.html">ILAO’s API</a></li>
<li class="toctree-l1"><a class="reference internal" href="next_steps.html">Next Steps Flows</a></li>
<li class="toctree-l1"><a class="reference internal" href="sms_overview.html">SMS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_analytics.html">Data and Analytics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">See also:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="creating_docs_in_github.html">Creating new docs in Github</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ILAO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="otis_cms.html">Get Legal Help</a></li>
          <li class="breadcrumb-item"><a href="otis_ai_integration.html">OTIS AI Integration</a></li>
      <li class="breadcrumb-item active">Guided Navigation SMS functions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/otis_guided_nav_functions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="guided-navigation-sms-functions">
<span id="guided-nav-functions"></span><h1>Guided Navigation SMS functions<a class="headerlink" href="#guided-navigation-sms-functions" title="Link to this heading"></a></h1>
<p>These functions allow us to interact with LegalServer’s Guided Navigation API over Twilio SMS.  They can be found in the Guided Nav service on Twilio</p>
<section id="validate-keyword">
<h2>Validate keyword<a class="headerlink" href="#validate-keyword" title="Link to this heading"></a></h2>
<p><strong>Function name:</strong></p>
<ul class="simple">
<li><p>mr-validate-legal-issue-gn (current)</p></li>
<li><p>validate-legal-issue-gn (deprecated)</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>event.legal_issue; this is a text value from either the initial trigger message body or in response to start-otis. This allows users to enter a word like “evict” or “snap” to bypass the OTIS get legal issue subflow to identify the user’s legal issue.</p></li>
<li><p>event.language_number; this is a numerical value that identifies the language of the user to match the legal issue provided in the correct language.</p></li>
</ul>
<p><strong>Returns:</strong> An object containing:</p>
<ul class="simple">
<li><p>code - corresponds to the list of legal issues within the function. If the legal_issue parameter does not match a value in the function, the code will return as -1.</p></li>
</ul>
<p><strong>Widget(s):</strong> validate_keyword</p>
<p><strong>Flows:</strong> Superbot main flows: SuperbotV2 &amp; SuperbotV3</p>
</section>
<section id="validate-legal-issue">
<h2>Validate legal issue<a class="headerlink" href="#validate-legal-issue" title="Link to this heading"></a></h2>
<p><strong>Function name:</strong></p>
<ul class="simple">
<li><p>mr-validate-legal-issue-flow (current)</p></li>
<li><p>validate-legal-issue-flow (deprecated)</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>event.legal_issue; this is a text value from widget: start-otis. This allows users to respond to a question about their legal issue if they did not get matched to a legal issue based on their trigger word (i.e. they didn’t text “evict” to 85622).</p></li>
<li><p>event.language_number; this is a numerical value that identifies the language of the user to match the legal issue provided in the correct language.</p></li>
</ul>
<p><strong>Returns:</strong> An object containing:</p>
<ul class="simple">
<li><p>code - corresponds to the list of legal issues within the function.</p></li>
</ul>
<p><strong>Widget(s):</strong> validate-legal-issue</p>
<p><strong>Flows:</strong> OTIS get legal issue</p>
</section>
<section id="get-process-list">
<h2>Get process list<a class="headerlink" href="#get-process-list" title="Link to this heading"></a></h2>
<p><strong>Function name:</strong></p>
<ul class="simple">
<li><p>mr-get-process-list (current);</p></li>
<li><p>get-process-list (depricated)</p></li>
</ul>
<p><strong>Parameters:</strong>  event.issue; this is the numeric value from whatever Twilio flow that is calling the process list. This will return the process id and metadata for the specific legal issue’s Guided Navigation.</p>
<p><strong>Returns:</strong> An object containing:</p>
<ul class="simple">
<li><p>processid - the unique identifier for a Guided Navigation process; if no matching process is found, will return 0.</p></li>
<li><p>lsc_code - the LSC problem code associated with the process</p></li>
<li><p>search_term - the default search term to store in ILAO’s data. The search_term can be found by going to <a class="reference external" href="https://www.illinoislegalaid.org/jsonapi/taxonomy_term/legal_issues?filter[foo][condition][operator]==&amp;filter[foo][condition][path]=drupal_internal__tid&amp;filter[foo][condition][value]=514486">https://www.illinoislegalaid.org/jsonapi/taxonomy_term/legal_issues?filter[foo][condition][operator]==&amp;filter[foo][condition][path]=drupal_internal__tid&amp;filter[foo][condition][value]=514486</a>, but changing “514486” to the legal_issue value used on the Case Acceptance webform. The search_term value is the “id”.</p></li>
</ul>
<img alt="_images/twilio_get_process_search_term.png" src="_images/twilio_get_process_search_term.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Processes are as follows so far 1 - unemployment benefits, 2 - Food stamps, 3 - TANF benefits, 4 - Renting or Renters, 5 - Expungement, 6 - DV, 7 - Bankruptcy (not live yet), 8 - Asylum/Immigration (not live yet).</p>
</div>
<p><strong>Widget(s):</strong></p>
<ul class="simple">
<li><p>get_gn_process (Superbot);</p></li>
<li><p>get-gn-process-id (Get legal issue); and</p></li>
<li><p>rerun_process (Guided Navigation)</p></li>
</ul>
<p><strong>Flow(s):</strong>
* Superbot main flows:</p>
<blockquote>
<div><ul class="simple">
<li><p>SuperbotV2_LIVE_9.11.23</p></li>
<li><p>SuperbotV3</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>OTIS get legal issue</p></li>
<li><p>OTIS Guided Navigation</p></li>
</ul>
</section>
<section id="start-a-new-session-for-given-process">
<h2>Start a new session for given process<a class="headerlink" href="#start-a-new-session-for-given-process" title="Link to this heading"></a></h2>
<p><strong>Function name:</strong>  start-process</p>
<p><strong>Parameters:</strong>  event.processid; this is the process id returned from the get-process-list function.</p>
<p><strong>Returns:</strong> An object containing:</p>
<ul class="simple">
<li><p>sessionid; the session ID returned by Legal Server. This is used throughout a user’s Guided Navigation session.</p></li>
</ul>
<p><strong>Widget:</strong> start-gn-process</p>
<p><strong>Flow:</strong> OTIS Guided Navigation</p>
<p><strong>Requires:</strong> username and password credentials to access the Legal Server API. These are currently stored in the function for the demo site only.</p>
</section>
<section id="get-the-guided-navigation-form">
<h2>Get the guided navigation form<a class="headerlink" href="#get-the-guided-navigation-form" title="Link to this heading"></a></h2>
<p><strong>Function names:</strong></p>
<ul class="simple">
<li><p>get-form-test-multiple (current)</p></li>
<li><p>get-form-test (deprecated)</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>THIS IS CURRENTLY BEING USED IN get-final-gn-profile</p>
</div>
<ul class="simple">
<li><p>get-form-multiple_v2 (in production) - adding support for ‘combined_outcome’ to show the user their “Best match” when there are multiple organization who will help with a legal problem, but 1 or more of the organizations will help with multiple aspects of the legal problem</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an applicant is facing a house foreclosure and a car repossession, all Orgs will take the case, but Org C is the “Best match”</p>
<ul class="simple">
<li><p>Org A will take a bankruptcy case to stop a house foreclosure</p></li>
<li><p>Org B will take a bankruptcy case to stop a car repossession</p></li>
<li><p>Org C will take a bankruptcy case to stop a house foreclosure &amp; a car repossession</p></li>
</ul>
</div>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>event.processid - the unique identifier for a Guided Navigation process</p></li>
<li><p>event.sessionid - the unique identifier for the Guided Navigation session; this was returned by LegalServer when the session started</p></li>
<li><p>event.language</p></li>
</ul>
<p><strong>Returns:</strong> an object that contains the next step in the guided navigation process. This function provides additional text to inform the applicant how to respond. Ex:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="err">i</span><span class="kc">f</span><span class="w"> </span><span class="err">(res.da</span><span class="kc">ta</span><span class="err">.</span><span class="kc">f</span><span class="err">orm.eleme</span><span class="kc">nts</span><span class="p">[</span><span class="err">j</span><span class="p">]</span><span class="err">.is_mul</span><span class="kc">t</span><span class="err">iple</span><span class="w"> </span><span class="err">==</span><span class="w"> </span><span class="kc">true</span><span class="err">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="err">respo</span><span class="kc">nse</span><span class="err">.display.su</span><span class="kc">ff</span><span class="err">ix</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">&#39;Reply</span><span class="w"> </span><span class="err">wi</span><span class="kc">t</span><span class="err">h</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="kc">nu</span><span class="err">mbers</span><span class="w"> </span><span class="kc">t</span><span class="err">ha</span><span class="kc">t</span><span class="w"> </span><span class="err">apply</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="err">you.</span><span class="w"> </span><span class="err">For</span><span class="w"> </span><span class="err">example</span><span class="p">,</span><span class="w"> </span><span class="err">reply</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="err">&#39;;</span>
<span class="w"> </span><span class="err">respo</span><span class="kc">nse</span><span class="err">.display.mul</span><span class="kc">t</span><span class="err">iple</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="s2">&quot;Multiple&quot;</span><span class="err">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>This code automatically adds the additional text about how to respond if the guided navigation element allows multiple responses (checkboxes).</p>
<p><strong>Widget:</strong> get-current-gn-form</p>
<p><strong>Flows:</strong></p>
<ul class="simple">
<li><p>OTIS Guided Navigation</p></li>
<li><p>OTIS Guided Navigation_v2</p></li>
</ul>
<p><strong>Requires:</strong> a sessionid and processid</p>
<p><strong>Supports:</strong></p>
<ul class="simple">
<li><p>Instructions with the next element when the instruction is not the first element in the guided navigation process</p></li>
<li><p>radio button options (user must choose one answer)</p></li>
<li><p>checkbox options (user can choose multiple options, ex: 1,3,4)</p></li>
</ul>
</section>
<section id="save-form-data-submitted-for-a-session">
<h2>Save form data submitted for a session<a class="headerlink" href="#save-form-data-submitted-for-a-session" title="Link to this heading"></a></h2>
<p><strong>Function name:</strong>  update-process</p>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>event.processid; this is the process id returned from the get-process-list function.</p></li>
<li><p>event.sessionid; this is the unique session id returned from the start-process function. This is consistent across an entire user’s session</p></li>
<li><p>event.form_id; this is the unique form id returned from the get-current-form function. This is unique per instance of a form.</p></li>
<li><p>event.element; this is the unique identifier in Legal Server for the form field.</p></li>
<li><p>data_value; this is the data from the application.  This may be:</p>
<ul>
<li><p>a date formatted as 2021-01-01</p></li>
<li><p>a numeric value representing the value from the form options</p></li>
</ul>
</li>
</ul>
<p><strong>Returns:</strong> An object containing:</p>
<ul class="simple">
<li><p>is_complete; a Boolean (true or false) indicating whether the Guided Navigation session is complete.</p></li>
</ul>
<p><strong>Widget:</strong> update-gn-data</p>
<p><strong>Flow:</strong> OTIS Guided Navigation</p>
<p><strong>Requires:</strong> username and password credentials to access the Legal Server API. These are currently stored in the function for the demo site only.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Legal Server returns a larger object set but all we care about here is the is_complete value. We use the get-current-form function to get a clean copy of the current form.</p>
</div>
</section>
<section id="getting-the-current-form">
<h2>Getting the current form<a class="headerlink" href="#getting-the-current-form" title="Link to this heading"></a></h2>
<p>This function gets the current form for a specific session and then parses it into something usable in the Twilio application.</p>
<p><strong>Function name:</strong>  get-current-form</p>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>event.processid; this is the process id returned from the get-process-list function.</p></li>
<li><p>event.sessionid; this is the unique session id returned from the start-process function. This is consistent across an entire user’s session</p></li>
</ul>
<p><strong>Returns:</strong> An object which varies based on the type of form returned.</p>
<ul>
<li><p>In all instances, the sessionid</p></li>
<li><p>In all instances, the current user session’s profile. This contains the field names and values collected.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;profile&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0263357e-0431-11ec-9b2f-0e8d40a13cd5&quot;</span><span class="p">,</span>
<span class="nt">&quot;ilao_unemploy_search_149&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w"> </span><span class="p">},</span>
</pre></div>
</div>
</li>
<li><p>In all instances, the curent form_id</p></li>
<li><p>In all instances, the is_complete value for the current form</p></li>
<li><p>In all instances, a display object to control how the form is displayed</p></li>
</ul>
<p>When the form returned includes a profile field with the _outcome, which indicates that we’ve reached the exit variable, the response object includes:</p>
<ul class="simple">
<li><p>outcome_variable, which is the field name of the outcome field</p></li>
<li><p>outcome_value, which is the value of the outcome field</p></li>
</ul>
<p>When the form incudes a form element, the response object is updated:</p>
<ul class="simple">
<li><p>display.id, which is the element ID of the form element</p></li>
<li><p>display.label, which is the label used in the form element</p></li>
<li><p>display.text, which by default is an empty string.</p></li>
</ul>
<p>When the form element type is “instructions”:</p>
<ul class="simple">
<li><p>display.text is added to return a cleaned version of the instructions text</p></li>
</ul>
<p>When the form element type is “Boolean” or “Select”</p>
<ul class="simple">
<li><p>display_text (for Boolean) returns the Yes or No string</p></li>
<li><p>an options element is added to the display object that includes, for each defined option:</p>
<ul>
<li><p>label of the option</p></li>
<li><p>value of the option</p></li>
<li><p>counter, which is a 1-based index for the display (because arrays are 0-indexed, we use the counter to better display results)</p></li>
</ul>
</li>
<li><p>a suffix of “Reply with the number.”</p></li>
</ul>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>the suffix should be removed and added to the flow to be language-neutral.</p>
</div>
<p>When the form element type is “Date”, returns:</p>
<blockquote>
<div><ul class="simple">
<li><p>an empty display.options array</p></li>
<li><p>a display.suffix of “Reply with a date formatted as mm/dd/yyyy.”</p></li>
<li><p>display.text of the form label</p></li>
</ul>
</div></blockquote>
<p><strong>Requires:</strong> username and password credentials to access the Legal Server API. These are currently stored in the function for the demo site only.</p>
</section>
<section id="getting-guided-navigation-matches">
<h2>Getting Guided Navigation matches<a class="headerlink" href="#getting-guided-navigation-matches" title="Link to this heading"></a></h2>
<p>This function returns any intake settings ids that are a match based on a match be</p>
<p><strong>Function names:</strong></p>
<ul class="simple">
<li><p>get-gn-match-test (current)</p></li>
<li><p>get-gn-match (deprecated)</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>event.token</p></li>
<li><p>event.user_issue = the number of the final case acceptance outcome value</p></li>
<li><p>event.outcome_field = the outcome field name</p></li>
<li><p>event.rest_export = this value tells the system which case acceptance rest export webform to look in for matches</p></li>
</ul>
<p><strong>Returns:</strong> An array of intake settings ids that match on the outcome field and value. This array does not filter on location or any other criteria. It simply returns webform case acceptance matches against Guided Navigation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function currently relies on the gn-outcome-list asset in Twilio for data. This asset should be updated whenever webforms change.</p>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Replace gn-outcome-list with live data from our API.</p>
</div>
<p><strong>Widget:</strong> get-gn-matches</p>
<p><strong>Flow:</strong> OTIS matches</p>
</section>
<section id="process-qualifiers">
<h2>Process qualifiers<a class="headerlink" href="#process-qualifiers" title="Link to this heading"></a></h2>
<p><strong>Function name:</strong> process-qualifiers</p>
<p><strong>Purpose:</strong> determine if the applicant is qualified for their chosen organization or if they need to apply for a different organization</p>
<p><strong>Parameters:</strong> event.intakeids.split</p>
<p><strong>Returns:</strong> an object that contains either:</p>
<ul class="simple">
<li><p>qualified (“Great”)</p></li>
<li><p>disqualified (“Unfortunately, you did not match to {{org}}. You can visit Get Legal Help for more help.”)</p></li>
<li><p>null - will redirect the applicant to their other matched organizations.</p></li>
</ul>
<p><strong>Widget:</strong> reselect-qualifiers</p>
<p><strong>Flows:</strong></p>
<ul class="simple">
<li><p>Superbot main flows:</p>
<ul>
<li><p>SuperbotV2_LIVE_9.11.23</p></li>
<li><p>SuperbotV3</p></li>
</ul>
</li>
</ul>
<p><strong>Status:</strong> in development</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="otis_tech_guided_navigation_forms.html" class="btn btn-neutral float-left" title="Guided Navigation Forms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="otis_tech_houston_ai.html" class="btn btn-neutral float-right" title="Houston AI Classifier API Docs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Illinois Legal Aid Online.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>